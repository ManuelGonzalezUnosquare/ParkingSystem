@if(!isRequestSent()){
<div class="flex flex-col animate-fade-in">
  <header class="flex flex-col items-center mb-8">
    <div
      class="size-16 bg-primary/10 rounded-full flex items-center justify-center mb-4 text-primary"
      aria-hidden="true"
    >
      <span class="material-symbols-outlined text-4xl">lock_reset</span>
    </div>
    <h1
      class="text-[#0d141c] tracking-light text-[32px] font-bold leading-tight text-center"
    >
      Reset Your Password
    </h1>
    <p
      class="text-[#4b739b] text-base font-normal leading-normal text-center mt-3"
    >
      Enter the email address associated with your account and we'll send you a
      link to reset your password.
    </p>
  </header>

  <form
    class="flex flex-col"
    [formGroup]="form"
    (submit)="doSubmit()"
    novalidate
  >
    <div class="form-control">
      <label class="form-label" for="recovery-email">Email</label>
      <input
        pInputText
        id="recovery-email"
        type="email"
        formControlName="email"
        placeholder="my-user@test.com"
        autocomplete="email"
        fluid
        [invalid]="form.controls.email.invalid && form.controls.email.touched"
        [attr.aria-invalid]="form.controls.email.invalid && form.controls.email.touched"
      />
      <app-form-validation-error
        [touched]="form.controls.email.touched"
        [errors]="form.controls.email.errors"
        label="Email"
      />
    </div>

    <div class="flex justify-end items-center gap-1 text-sm text-gray-400 my-3">
      <span>I already have a</span>
      <p-button
        link
        size="small"
        label="code"
        [routerLink]="['/auth/password-recovery-confirm']"
        [style]="{ padding: '0' }"
      />
    </div>

    <app-form-feedback [callState]="store.callState()" />

    <div class="pt-4">
      <p-button
        type="submit"
        label="Send Reset Link"
        fluid
        [loading]="store.loading()"
      />
    </div>

    <div class="text-center mt-4">
      <p-button
        link
        label="Back to Login"
        icon="pi pi-arrow-left"
        [routerLink]="['/auth/login']"
      />
    </div>
  </form>
</div>
} @else {
<div
  class="flex flex-col items-center py-6 animate-fade-in"
  id="success-state"
  role="alert"
  aria-live="polite"
>
  <div
    class="size-20 bg-green-100 rounded-full flex items-center justify-center mb-6 text-green-600"
    aria-hidden="true"
  >
    <span class="material-symbols-outlined text-5xl">mark_email_read</span>
  </div>
  <h2 class="text-[#0d141c] text-2xl font-bold leading-tight text-center">
    Email Sent!
  </h2>
  <p
    class="text-[#4b739b] text-base font-normal leading-normal text-center mt-4"
  >
    Check your inbox. We've sent a password reset link to
    <span class="font-semibold text-[#0d141c]"
      >{{ form.controls.email.value }}</span
    >.
  </p>

  <div class="mt-8 flex flex-col gap-4 w-full">
    <p class="text-sm text-[#4b739b] text-center">
      Didn't receive the email? Check your spam folder or
      <button
        type="button"
        (click)="doSubmit()"
        class="text-primary font-semibold hover:underline cursor-pointer focus:outline-primary"
      >
        try again</button
      >.
    </p>
    <p-button
      link
      label="Back to Login"
      icon="pi pi-arrow-left"
      [routerLink]="['/auth/login']"
    />
  </div>
</div>
}
