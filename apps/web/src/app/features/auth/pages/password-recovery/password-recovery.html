@if(!isRequestSent()){
<div class="flex flex-col">
  <!-- header -->
  <div class="flex flex-col items-center mb-8">
    <div
      class="size-16 bg-primary/10 rounded-full flex items-center justify-center mb-4 text-primary"
    >
      <span class="material-symbols-outlined text-4xl">lock_reset</span>
    </div>
    <h1
      class="text-[#0d141c] tracking-light text-[32px] font-bold leading-tight text-center"
    >
      Reset Your Password
    </h1>
    <p
      class="text-[#4b739b] text-base font-normal leading-normal text-center mt-3"
    >
      Enter the email address associated with your account and we'll send you a
      link to reset your password.
    </p>
  </div>
  <!-- form -->
  <form class="flex flex-col" [formGroup]="form" (submit)="doSubmit()">
    <!-- email -->
    <div class="form-control">
      <label class="form-label" for="email">Email</label>
      <input
        autocomplete="email"
        fluid
        formControlName="email"
        id="email"
        pInputText
        placeholder="my-user@test.com"
        tabindex="1"
        type="email"
      />
      <app-form-validation-error
        [touched]="form.controls.email.touched"
        [errors]="form.controls.email.errors"
        label="Email"
      />
    </div>
    <div class="flex justify-end items-center gap-1 text-sm text-gray-400 my-3">
      <span>I already have a</span>
      <p-button
        link
        size="small"
        [pt]="{root:'p-0'}"
        label="code"
        [routerLink]="['/auth/password-recovery-confirm']"
      />
    </div>

    <app-form-feedback [callState]="store.callState()" />

    <div class="pt-4">
      <p-button
        type="submit"
        label="Send Reset Link"
        fluid
        [loading]="store.loading()"
      />
    </div>
    <div class="text-center mt-4">
      <p-button
        link
        label="Back to Login"
        icon="pi pi-arrow-left"
        [routerLink]="['/auth/login']"
      />
    </div>
  </form>
</div>
} @else{

<!-- Success State Message (Hidden by default, can be toggled manually for demonstration) -->
<div class="flex flex-col items-center py-6" id="success-state">
  <div
    class="size-20 bg-green-100 rounded-full flex items-center justify-center mb-6 text-green-600"
  >
    <span class="material-symbols-outlined text-5xl">mark_email_read</span>
  </div>
  <h2 class="text-[#0d141c] text-2xl font-bold leading-tight text-center">
    Email Sent!
  </h2>
  <p
    class="text-[#4b739b] text-base font-normal leading-normal text-center mt-4"
  >
    Check your inbox. We've sent a password reset link to
    <span class="font-semibold text-[#0d141c]">{{form.value.email}}</span>.
  </p>
  <div class="mt-8 flex flex-col gap-4 w-full">
    <p class="text-sm text-[#4b739b] text-center">
      Didn't receive the email? Check your spam folder or
      <button class="text-primary font-semibold hover:underline">
        try again</button
      >.
    </p>
    <p-button
      link
      label="Back to Login"
      icon="pi pi-arrow-left"
      [routerLink]="['/auth/login']"
    />
  </div>
</div>
}
